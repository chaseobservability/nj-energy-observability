<button class="theme-toggle" id="theme-toggle" type="button" aria-pressed="false">
  Theme: System
</button>

<script>
  (function () {
    var storageKey = "njobs-theme";
    var root = document.documentElement;
    var button = document.getElementById("theme-toggle");
    if (!button) {
      return;
    }

    function applyTheme(value) {
      if (value === "light" || value === "dark") {
        root.setAttribute("data-theme", value);
      } else {
        root.removeAttribute("data-theme");
      }
      var label = value === "light" ? "Light" : value === "dark" ? "Dark" : "System";
      button.textContent = "Theme: " + label;
      button.setAttribute("aria-pressed", value === "light" || value === "dark");
    }

    var saved = localStorage.getItem(storageKey);
    applyTheme(saved);

    button.addEventListener("click", function () {
      var current = localStorage.getItem(storageKey);
      var next = current === "light" ? "dark" : current === "dark" ? "" : "light";
      if (next === "") {
        localStorage.removeItem(storageKey);
        applyTheme(null);
      } else {
        localStorage.setItem(storageKey, next);
        applyTheme(next);
      }
    });
  })();
</script>
